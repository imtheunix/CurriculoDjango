{% extends 'base.html' %}
{% block content %}
{% load poll_extras %}


<section class="text-gray-600 body-font ml-4">
  <div class="container px-12 py-24">
    <div class="flex flex-col items-center text-center justify-center">
      <h1 class="sm:text-3xl text-2xl font-medium title-font mb-4 text-gray-900">Utilizando TA-Lib e Numpy</h1>
      <p class="lg:w-2/3 mx-auto leading-relaxed text-base">Índice: RSI, período de 3 fechamentos / Símbolo: NANOUSDT / Gráfico: 1min.</p>
      <p class="lg:w-2/3 mx-auto leading-relaxed text-base">Recarregando no fechamento do candle [<span id="time">60</span>]</p>
      <p class="lg:w-2/3 mx-auto leading-relaxed text-base"></p>
      <div class="w-12 h-1 bg-indigo-500 rounded mt-6 mb-6 "></div>
    </div>
    <div class="flex flex-col text-center w-full mb-">
      <h1 class="sm:text-2xl text-xl font-small title-font text-gray-700">Ultimos [6] fechamentos</h1>
    </div>

    <div class="flex flex-wrap -m-4 text-center">
      {% for close in closes %}

      <div class="p-4 md:w-1/6 sm:w-1/2 w-full">
        <div class="border-2 border-gray-200 px-4 py-6 rounded-lg">
          {% if closes|index:forloop.counter0 < medias %} 
          <h2 class="title-font font-medium text-2xl text-red-600">${{closes|index:forloop.counter0 }}</h2>
            {% else %}
            <h2 class="title-font font-medium text-2xl text-blue-500">${{ closes|index:forloop.counter0 }}</h2>
            {% endif %}
        </div>
      </div>
      {% endfor %}
    </div>
    <div class="flex flex-col text-center w-full ">
      <h1 class="sm:text-2xl text-xl font-medium title-font mb-4 mt-2 text-gray-700">Média:
      </h1>
    </div>
    <div class="flex flex-wrap -m-4 text-center">
      <div class="p-4 md:w-1/1 sm:w-1/1 w-full">
        <div class="border-2 border-gray-200 px-4 py-6 rounded-lg">
          <h2 class="title-font font-medium text-3xl text-gray-900">${{ medias|stringformat:".2f" }}</h2>
        </div>
      </div>
    </div>

    <div class="flex items-center text-center justify-center">
      <div class="w-1/2 h-1 bg-indigo-500 rounded mt-6"></div>
    </div>
  </div>

  <section class="text-gray-600 body-font mb-24">
    <div class="container mx-auto flex flex-wrap justify-center">
      <div class="flex flex-wrap -m-4 flex flex-wrap justify-center">
        <div class="p-4 lg:w-1/2 md:w-full">
          <div class="flex border-2 rounded-lg border-gray-200 border-opacity-50 p-8 sm:flex-row flex-col">
            <div class="w-16 h-16 sm:mr-8 sm:mb-0 mb-4 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 flex-shrink-0">
              <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
              width="980.000000pt" height="689.000000pt" viewBox="0 0 980.000000 689.000000"
              preserveAspectRatio="xMidYMid meet">

              <g transform="translate(0.000000,689.000000) scale(0.100000,-0.100000)"
              fill="#000000" stroke="none">
              <path d="M4605 6873 c-833 -53 -1666 -331 -2370 -791 -578 -377 -1099 -903
              -1463 -1477 -403 -637 -647 -1308 -743 -2045 -39 -296 -36 -825 7 -1200 52
              -464 289 -1279 386 -1331 15 -8 103 -15 243 -20 537 -18 8407 -1 8633 19 73 7
              95 12 107 28 46 60 189 472 249 714 92 372 146 840 146 1260 0 1103 -435 2254
              -1182 3126 -803 937 -1905 1530 -3128 1683 -288 36 -642 50 -885 34z m655
              -273 c385 -24 736 -94 1125 -225 985 -329 1815 -967 2390 -1835 387 -584 625
              -1227 731 -1972 21 -154 31 -775 15 -999 -27 -381 -127 -834 -265 -1205 l-38
              -101 -116 -6 c-104 -5 -257 5 -270 18 -2 2 18 57 46 122 106 245 164 420 232
              698 61 250 64 283 63 750 0 455 -6 536 -55 780 -161 808 -476 1472 -989 2090
              -178 214 -492 510 -734 692 -520 390 -1173 672 -1797 778 -278 46 -446 58
              -768 52 -313 -6 -466 -21 -725 -72 -958 -189 -1822 -713 -2474 -1500 -552
              -666 -895 -1488 -997 -2390 -24 -208 -24 -647 -1 -845 45 -380 142 -745 293
              -1103 l33 -79 -187 7 c-119 5 -190 12 -194 19 -10 15 -131 382 -157 476 -57
              207 -106 464 -138 725 -25 203 -25 810 0 1015 83 667 271 1249 582 1795 452
              796 1156 1458 1979 1861 444 218 980 376 1486 438 69 9 139 17 155 19 69 9
              623 6 775 -3z m-543 -618 c34 -22 37 -61 41 -675 l4 -608 47 -34 c66 -49 99
              -47 161 11 l50 47 0 634 0 635 68 -7 c458 -42 743 -98 1076 -209 535 -179
              1003 -460 1446 -869 125 -115 322 -326 328 -350 3 -14 -171 -198 -587 -622
              -136 -138 -266 -277 -290 -309 l-45 -58 15 -41 c17 -50 67 -87 116 -87 22 0
              51 11 80 31 25 17 237 220 471 450 l426 419 64 -98 c228 -350 395 -692 523
              -1072 71 -211 108 -359 148 -585 53 -301 67 -405 52 -414 -22 -14 -254 -21
              -686 -21 -585 -1 -657 -10 -671 -85 -9 -51 3 -103 29 -120 47 -30 155 -36 750
              -42 l597 -6 0 -81 c-1 -437 -96 -859 -304 -1340 l-83 -191 -239 -7 c-131 -3
              -1774 -10 -3650 -13 l-3411 -7 -61 138 c-106 244 -196 518 -242 736 -46 220
              -84 646 -66 741 l7 36 612 3 c661 3 643 2 672 58 29 56 8 136 -43 160 -21 11
              -159 15 -618 20 -325 4 -596 10 -603 14 -34 21 24 430 105 736 95 360 238 719
              404 1015 119 214 361 558 489 696 l59 64 419 -416 c384 -382 511 -501 563
              -529 57 -31 154 72 136 145 -11 44 -104 145 -523 566 -227 229 -413 421 -413
              427 0 28 477 401 661 517 135 86 463 250 626 313 246 96 527 179 738 218 67
              12 445 64 530 73 6 0 15 -3 22 -7z"/>
              <path d="M4839 4048 c-22 -15 -45 -46 -66 -88 -82 -165 -385 -1175 -428 -1424
              -20 -118 -19 -171 5 -247 53 -173 217 -327 388 -365 246 -55 509 113 586 375
              20 68 20 133 1 262 -50 330 -255 1216 -325 1402 -16 42 -31 64 -58 82 -45 31
              -60 31 -103 3z m65 -740 c152 -612 195 -909 147 -1013 -29 -64 -80 -102 -147
              -110 -86 -11 -178 -1 -212 24 -43 30 -90 106 -98 157 -12 84 36 290 180 764
              85 280 88 290 96 290 3 0 18 -51 34 -112z"/>
              <path d="M3355 1593 c-41 -11 -75 -44 -86 -86 -16 -60 -16 -810 0 -859 19 -58
              47 -70 198 -80 74 -5 755 -8 1531 -6 1528 4 1451 1 1496 61 20 27 21 41 24
              400 4 455 1 490 -42 533 -41 41 -92 52 -139 29 -60 -28 -61 -35 -67 -415 l-5
              -345 -365 0 -365 0 -7 295 c-7 340 -12 390 -40 425 -62 79 -176 71 -214 -16
              -16 -39 -19 -81 -24 -374 l-5 -330 -355 0 -355 0 -7 305 c-4 168 -13 328 -19
              357 -12 60 -49 98 -103 109 -43 7 -119 -24 -138 -58 -10 -17 -14 -106 -18
              -368 l-5 -345 -367 -3 -366 -2 -4 348 c-3 388 -3 389 -73 418 -35 14 -46 15
              -80 7z"/>
              </g>
              </svg>
            </div>
            <div class="flex-grow">
              <h2 class="text-gray-900 text-lg title-font font-medium mb-3">Ultimo RSI</h2>
              <p class="leading-relaxed text-base">{{ last_rsi }}</p>
            </div>
          </div>
        </div>

        {% if last_rsi < 30 %}
        <div class="p-4 lg:w-1/2 md:w-screen mx-auto">
          <div class="flex border-2 rounded-lg border-gray-200 border-opacity-50 p-8 sm:flex-row flex-col">
            <div class="w-16 h-16 sm:mr-8 sm:mb-0 mb-4 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 flex-shrink-0">
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">
                <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>
                <g><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"><path d="M5888.7,4992.7c-67-26.8-70.9-72.8-80.4-1210.6l-9.6-1120.6l-93.9-23c-176.2-46-339-141.7-480.8-285.4c-419.5-417.6-423.3-1082.3-7.7-1503.7l109.2-111.1L4990.3-35.5c-183.9-425.3-341-779.6-348.6-787.3c-9.6-9.6-149.4,65.1-310.3,164.7c-162.8,99.6-316.1,187.7-341,195.4c-93.9,28.7-145.6-19.2-339-327.6c-103.4-162.8-189.6-293.1-191.6-289.2c-3.8,1.9-111.1,245.2-237.5,540.2c-128.3,293.1-245.2,557.4-260.5,586.1c-53.6,105.4-218.4,113-283.5,13.4c-15.3-24.9-128.3-406.1-250.9-848.6c-122.6-442.5-239.4-862-260.5-934.8l-38.3-128.3h-231.8H1665l-212.6-208.8l-212.6-210.7l-191.5,260.5c-103.4,141.7-205,266.3-224.1,275.8c-51.7,28.7-141.7,19.2-185.8-15.3C596.1-1786.3,100-2874.3,100-2931.8c0-42.1,36.4-111.1,74.7-139.8c46-36.4,160.9-30.6,205,9.6c21.1,19.2,118.8,214.5,216.5,432.9c99.6,218.4,187.7,388.8,195.4,381.2s82.4-105.4,164.7-216.4c157.1-210.7,222.2-260.5,308.4-239.4c30.6,7.7,157.1,116.8,300.7,260.5l250.9,247.1H2050c281.6,0,331.4,17.2,375.4,137.9c15.3,46,116.9,396.5,224.1,781.5c105.4,385,195.4,703,201.1,706.8c7.7,7.7,24.9-32.5,268.2-593.8c109.2-252.8,182-396.5,214.5-419.5c59.4-47.9,137.9-47.9,197.3-1.9c24.9,19.2,141.7,187.7,256.7,373.5c116.9,183.9,218.4,335.2,226,337.1c9.6,0,157.1-86.2,327.6-191.6c306.5-187.7,371.6-214.5,461.6-180.1c42.1,17.3,57.5,49.8,459.7,978.8c197.3,450.2,362,825.6,369.7,833.3c7.7,7.7,49.8,3.8,95.8-9.6l80.5-21.1v-2584c0-2750.7-1.9-2668.3,86.2-2702.8c70.9-26.8,164.7-11.5,210.7,36.4l47.9,46v2605.1V539.1l74.7,13.4c88.1,15.3,293.1,109.2,379.3,174.3c32.6,24.9,65.1,46,68.9,46c5.7,0,174.3-185.8,377.4-411.8c201.1-226,385-425.2,408-440.6c23-15.3,63.2-28.7,91.9-28.7c122.6,0,113-23,641.7,1551.6c272,810.3,501.9,1475,507.6,1475c7.7,0,132.2-103.4,275.8-229.9c218.4-193.5,270.1-229.9,321.8-229.9c93.9,0,139.8,44.1,183.9,176.2c136,419.5,425.2,1478.8,415.6,1519c-28.7,116.8-189.6,166.7-275.8,86.2c-44.1-40.2-49.8-59.4-262.4-800.7c-78.5-268.2-143.7-488.5-147.5-492.3c-3.8-3.8-116.8,93.8-254.8,214.5c-136,120.7-268.2,227.9-293.1,237.5c-59.4,23-126.4,3.8-172.4-46c-21.1-24.9-243.3-660.9-521-1494.1c-268.2-796.9-492.3-1448.1-498-1446.2c-7.7,3.8-137.9,145.6-291.2,318L6905.8,1041l46,91.9c70.9,143.7,101.5,285.4,101.5,475c0,199.2-30.6,323.7-128.3,509.5c-122.6,235.6-400.3,454-662.8,521l-99.6,24.9l-9.6,1135.9l-9.6,1134l-46,36.4C6055.4,5004.2,5946.2,5015.7,5888.7,4992.7z M6105.1,2322.5C6812,2192.2,6938.4,1246,6291,939.5c-116.9-55.6-145.6-61.3-310.3-61.3c-157.1,0-197.3,7.7-293.1,51.7c-153.2,72.8-302.6,220.3-369.7,365.9c-49.8,105.4-55.6,139.8-55.6,310.3c0,172.4,5.7,203,55.6,306.5c103.4,208.8,306.5,365.9,532.5,409.9C5967.2,2345.4,5978.7,2345.4,6105.1,2322.5z"/><path d="M5863.8,1713.3c-61.3-63.2-69-111.1-26.8-191.6c55.6-107.3,203-120.7,277.7-26.8C6248.8,1665.4,6017,1864.7,5863.8,1713.3z"/></g></g>
                </svg>
            </div>
            <div class="flex-grow">
              <h2 class="text-green-600 text-lg title-font font-medium mb-3">RSI menor que 30</h2>
              <p class="leading-relaxed text-base">Quando o RSI está neste nível, siginifica que há uma venda exagerada, e a tendência pode se reverter.</p>
            </div>
          </div>
        </div>
        {% elif last_rsi > 70 %}
        <div class="p-4 lg:w-1/2 md:w-screen mx-auto">
          <div class="flex border-2 rounded-lg border-gray-200 border-opacity-50 p-8 sm:flex-row flex-col">
            <div class="w-16 h-16 sm:mr-8 sm:mb-0 mb-4 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 flex-shrink-0">
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">
                <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>
                <g><g transform="translate(0.000000,512.000000) scale(0.100000,-0.100000)"><path d="M5884.3,4987.1c-13.4-5.7-36.4-34.4-51.7-63.2c-24.9-47.9-28.7-396.2-28.7-2635.7V-293.8l-80.4-21.1c-45.9-13.4-88-17.2-95.7-9.6c-7.6,7.7-179.9,402-386.7,874.7c-204.8,474.7-390.5,880.5-411.5,905.3c-74.6,84.2-147.4,61.3-491.9-149.3c-174.2-105.3-321.6-191.4-329.2-191.4c-7.7,1.9-107.2,153.1-223.9,338.8c-114.8,183.7-231.6,352.2-256.5,371.3c-61.3,47.9-141.6,45.9-201-5.8c-32.5-28.7-122.5-210.5-252.7-513c-111-258.4-208.6-474.7-216.3-484.3c-7.7-7.7-72.7,195.2-143.6,449.8c-70.8,256.5-168.4,606.8-218.2,779c-109.1,394.3-99.5,384.7-444.1,384.7H1815l-250.7,246.9c-143.6,143.6-269.9,252.7-300.5,260.3c-86.1,21.1-151.2-28.7-308.2-239.3c-82.3-111-157-208.6-164.6-216.3c-7.7-7.7-95.7,162.7-195.2,380.9c-97.6,218.2-195.2,413.4-216.3,432.6c-44,40.2-158.9,45.9-204.8,9.6c-38.3-28.7-74.6-97.6-74.6-139.7c0-55.5,495.7-1144.6,537.9-1179.1c44-38.3,134-44,187.6-17.2c19.1,11.5,118.7,135.9,223.9,277.5l187.6,258.4l214.4-210.5l214.4-208.6h231.6H2127l38.3-128.2c21.1-72.7,137.8-491.9,260.3-934.1c122.5-442.1,235.4-823,250.7-847.9c65.1-99.5,229.7-91.9,283.3,13.4c15.3,28.7,132.1,292.8,260.3,585.7c126.3,294.8,233.5,537.9,237.3,539.8c1.9,3.8,90-128.2,191.4-290.9c157-246.9,197.2-298.6,248.8-315.8c34.5-11.5,80.4-13.4,99.5-5.7c19.1,5.7,168.4,93.8,331.1,191.4c160.8,99.5,300.5,174.2,310.1,164.6c7.7-7.6,164.6-361.7,348.4-786.7l335-773.3l-109.1-111c-415.3-421.1-411.5-1085.3,7.7-1502.5c141.7-143.6,304.3-239.3,480.4-285.2l93.8-23l9.6-1119.7c5.7-614.4,17.2-1133.1,26.8-1152.3c36.4-76.6,185.6-95.7,262.2-34.4l45.9,36.3l9.6,1135l9.6,1133.1l114.8,30.6c174.2,49.8,312,132.1,461.3,279.4c145.5,143.6,229.7,283.3,285.2,478.5c24.9,86.1,30.6,160.8,24.9,323.5c-7.6,185.7-17.2,231.6-70.8,359.8c-34.4,82.3-57.4,157-49.8,168.4c23,36.4,530.2,602.9,543.6,608.7c9.6,1.9,233.5-646.9,499.6-1445.1c336.9-1008.7,495.8-1464.3,526.4-1496.8c30.6-30.6,65.1-44,112.9-44c76.6,0,82.3,3.8,402,287.1l201,178l38.3-130.2c21-70.8,93.8-327.3,164.6-570.4c164.6-574.2,160.8-560.8,206.7-602.9c65.1-61.3,172.3-51.7,231.6,21c26.8,32.5,49.8,72.8,49.8,91.9c0,42.1-430.7,1538.9-459.4,1588.7c-26.8,51.7-78.5,78.5-151.2,78.5c-47.9,0-103.3-40.2-290.9-204.8c-245-220.1-300.5-264.1-312-252.7c-3.8,3.8-227.8,666.1-497.7,1471.9C7666.3,357,7670.1,349.4,7549.5,349.4c-28.7,0-70.8-13.4-93.8-28.7c-23-15.3-206.7-214.4-409.6-440.2l-367.5-411.5l-59.3,40.2C6514-420.1,6301.6-324.4,6223.1-311l-74.7,13.4v2601.2v2603.1l-47.9,45.9C6056.6,4998.6,5953.2,5015.9,5884.3,4987.1z M6288.2-697.6c382.8-179.9,534-633.5,335-1004.9c-281.4-526.4-1043.2-507.2-1309.2,32.5c-49.8,103.4-55.5,134-55.5,306.3c0,170.4,5.7,204.8,55.5,310.1c34.4,74.7,91.9,155,153.1,212.5c172.3,162.7,312,216.3,537.8,208.6C6131.2-638.3,6184.8-649.8,6288.2-697.6z"/><path d="M5867.1-1285.2c-42.1-36.4-53.6-61.3-53.6-124.4c0-107.2,57.4-164.6,164.6-164.6c155,0,224,168.4,114.8,279.5C6022.1-1225.9,5941.7-1222.1,5867.1-1285.2z"/></g></g>
                </svg>
            </div>
            <div class="flex-grow">
              <h2 class="text-red-600 text-lg title-font font-medium mb-3">RSI maior que 70</h2>
              <p class="leading-relaxed text-base">Quando o RSI está neste nível, siginifica que há uma compra exagerada, e a tendência pode se reverter.</p>
            </div>
          </div>
        </div>
        {% else %}
        <div class="p-4 lg:w-1/2 md:w-screen mx-auto">
          <div class="flex border-2 rounded-lg border-gray-200 border-opacity-50 p-8 sm:flex-row flex-col">
            <div class="w-16 h-16 sm:mr-8 sm:mb-0 mb-4 inline-flex items-center justify-center rounded-full bg-indigo-100 text-indigo-500 flex-shrink-0">
              <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">
                <metadata> Svg Vector Icons : http://www.onlinewebfonts.com/icon </metadata>
                <g><g transform="translate(0.000000,120.000000) scale(0.100000,-0.100000)"><path d="M3787.5,952.8C2894.4,715.2,2255.4,346.5,1559-358C846.2-1062.7,485.7-1693.5,248.1-2619.3c-295-1155.2-147.5-2408.7,426-3498.3c344.1-663.7,1343.6-1663.2,2007.3-2007.3c1089.6-573.5,2343.2-721,3498.3-426.1c925.9,237.5,1556.7,598.1,2261.3,1310.9c712.8,704.6,1073.3,1335.4,1310.9,2261.2c294.9,1155.3,147.5,2408.8-426.1,3498.4C8981.7-816.9,7982.2,182.7,7318.6,526.8C6237.1,1092.1,4934.5,1247.8,3787.5,952.8z M5974.9,338.4C8236.2-202.4,9670-2512.8,9137.5-4774.1c-360.5-1532.1-1630.4-2802-3162.5-3162.5C2927.2-8649.3,141.6-5880.1,862.6-2832.3C1403.3-546.5,3697.3,870.9,5974.9,338.4z"/><path d="M3238.5-2365.3c-131.1-122.9-204.8-295-204.8-450.6c0-155.7,73.7-327.7,204.8-450.6c401.4-409.6,1106-122.9,1106,450.6c0,335.9-319.5,655.4-655.4,655.4C3533.5-2160.5,3361.4-2234.2,3238.5-2365.3z"/><path d="M5860.3-2365.3c-131.1-122.9-204.8-295-204.8-450.6c0-155.7,73.7-327.7,204.8-450.6c122.9-131.1,294.9-204.8,450.6-204.8c155.6,0,327.7,73.7,450.6,204.8c131.1,122.9,204.8,294.9,204.8,450.6c0,155.6-73.8,327.7-204.8,450.6c-122.9,131.1-295,204.8-450.6,204.8C6155.2-2160.5,5983.2-2234.2,5860.3-2365.3z"/><path d="M3033.7-5765.4v-327.7H5000h1966.3v327.7v327.7H5000H3033.7V-5765.4z"/></g></g>
                </svg>
            </div>
            <div class="flex-grow">
              <h2 class="text-gray-900 text-lg title-font font-medium mb-3">RSI neutro</h2>
              <p class="leading-relaxed text-base">Quando o RSI está neste nível, siginifica que está acontecendo uma inversão de tendência ou incerteza no mercado.</p>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
    
  </section>
  <div class="flex items-center text-center justify-center">
      <div class="mt-4 mb-24"></div>
    </div>
    <div class="mt-4 mb-12"></div>
  </div>

  <script>

    function updateDiv() {
      location.reload();
    }
  
    function startTimer(duration, display) {
      var timer = duration, minutes, seconds;
      setInterval(function () {
        seconds = parseInt(timer % 60, 10);
        seconds = seconds < 10 ? "0" + seconds : seconds;
  
        display.textContent = seconds;
  
        if (--timer < 0) {
          timer = duration;
          updateDiv();
        }
      }, 1000);
    }
  
    window.onload = function () {
      var fiveMinutes = 60,
        display = document.querySelector('#time');
      startTimer(fiveMinutes, display);
    };
  </script>
  


  {% endblock content %}